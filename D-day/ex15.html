<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="ex15.css" type="text/css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap');
        </style>
</head>
<body >
    <div class="wrap">
        <header>
            <nav id=logo> |K:TIMER</nav>
            <nav id=nav>
                    <article id=text1><a href="http://rlaehd97.dothome.co.kr/">Coming&nbsp;Soon</a></article>
                    <article id=text2><a href="/search.html">Book Search</a></article>
                    <article id=text3><a href="">Menu3</a></article>
                    <article id=text4><a href="">News</a></article>
                    <article id=text5><a href="">Contact</a></article>

            </nav>
        </header>
        <main>
            <section>
                <article id=daytext>
                    <text>  &nbsp;  &nbsp;   &nbsp;  &nbsp;
                         <!-- Year &nbsp; &nbsp; &nbsp;
                        Month &nbsp &nbsp  &nbsp
                         Date &nbsp &nbsp &nbsp &nbsp 
                         Week &nbsp &nbsp &nbsp 
                          Hour &nbsp &nbsp 
                            Minutes &nbsp  
                             seconds  -->
                            </text>
                </article>
            </section>
            <section>
                <article id=timer>
                    <text></text>
                </article>
            </section>
            <!-- style="color:#2b5fff" -->
            <section>
                <article id=text6>
                     All D-days aCheckt a glance
                </article>

                <article id=list>
                    <div class="input-group mb-3  " > 
                        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group btn-group-lg "  id="list2"  role="group" aria-label="First group">
                                <button type="button"  id="btn1" class="btn btn-primary">NOW</button>
                                <button type="button" id="btn2" class="btn btn-primary">Christmas</button>
                                <button type="button" id="btn3" class="btn btn-primary">Valentine</butt>
                                <button type="button" id="btn4" class="btn btn-primary">NewYear</button>
                                <div class="btn-group" role="group">
                                    <button id="btnGroupDrop1" style="font-size: 20px;" type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                        Custom
                                    </button>
                                   
                                    <ul class="dropdown-menu" aria-labelledby="btnGroupDrop1" id=btnGroup>  
                                      <li>
                                          <button class="dropdown-item" onclick="addList()" style="color: white;background-color:black">New&nbsp;Date
                                            <input type="date" id="Cusdate">
                                    </button>
                                </li>
                                      <input type="text" class="dropdown-item" placeholder="name" id=btn5 href="#"></input>
                                    </ul>
                             
                                  </div>
                            </div>
                      </div>
                </article>
            </section>


        </main>
       
        
        <footer>
            <!-- <img id="image" src="http://wiki.hash.kr/images/9/97/%EC%9C%A0%ED%8A%9C%EB%B8%8C_%EB%A1%9C%EA%B3%A0.png"
            width="100px">
             -->
        </footer>

    </div>

    <script>


        var type=1;
        let n=0;
        let cusNum=0;
        let arr=[];
        const btn = document.querySelector('#btn1')
            btn.addEventListener('click', e => {
               type=1
            });
        const btn2 = document.querySelector('#btn2')
            btn2.addEventListener('click', e => {
               type=2
            });
        const btn3 = document.querySelector('#btn3')
            btn3.addEventListener('click', e => {
               type=3
            });
      
         const btn4 = document.querySelector('#btn4')
            btn4.addEventListener('click', e => {
               type=4
            });
    
         
        var week = new Array('Sun', 'Mon', 'Thu', 'Wed', 'Thu', 'Fri', 'Sat');

            
            
             setInterval(printNum);
                function printNum() {
                    now = new Date();
               




                    if (type === 1) {
                        document.querySelector('#timer').innerHTML = `${now.getFullYear()} : ${numberPad(now.getMonth()+1, 2)} : ${numberPad(now.getDate(), 2)} :
                        ${week[now.getDay()]} : ${numberPad(now.getHours(), 2)} : ${numberPad(now.getMinutes(), 2)} : ${numberPad(now.getSeconds(), 2)}`;
                    }else if(type===2){
                        let  christmas=new Date(`${now.getFullYear()}-12-25T00:00:00.000+0900`);   
                        if(now>christmas){
                            christmas=new Date(`${now.getFullYear()+1}-12-25T00:00:00.000+0900`);
                        }
                        now=now.getTime();
                        christmas=christmas.getTime();
                        
                        let time=christmas-now;
                        let date=Math.floor(time/(1000*60*60*24))//일
                        let hours=Math.floor(time%(1000*60*60*24)/(1000*60*60))//시간
                        let minutes=Math.floor(time%(1000*60*60)/(1000*60))//분
                        let seconds=Math.floor(time%(1000*60)/1000)//초



                        document.querySelector('#timer').innerHTML = `  ${numberPad(date, 2)} :
                        ${numberPad(hours, 2)} : ${numberPad(minutes, 2)} : ${numberPad(seconds, 2)}
                        `;


                    }else if(type===3){
                        let valentine=new Date(`${now.getFullYear()}-02-14T00:00:00+0900`);   
                        if(now>valentine){
                            valentine=new Date(`${now.getFullYear()+1}-02-14T00:00:00+0900`);
                        }
                        now=now.getTime();
                        valentine=valentine.getTime();

                        let time=valentine-now;
                        let date=Math.floor(time/(1000*60*60*24))//일
                        let hours=Math.floor(time%(1000*60*60*24)/(1000*60*60))//시간
                        let minutes=Math.floor(time%(1000*60*60)/(1000*60))//분
                        let seconds=Math.floor(time%(1000*60)/1000)//초

                        document.querySelector('#timer').innerHTML = `  ${numberPad(date, 2)} :
                        ${numberPad(hours, 2)} : ${numberPad(minutes, 2)} : ${numberPad(seconds, 2)}
                        `;

                    }else if(type===4){
                        let newyear=new Date(`${now.getFullYear()+1}-01-01T00:00:00+0900`);   
                        now=now.getTime();
                        newyear=newyear.getTime();
                        let time=newyear-now;
                        let date=Math.floor(time/(1000*60*60*24))//일
                        let hours=Math.floor(time%(1000*60*60*24)/(1000*60*60))//시간
                        let minutes=Math.floor(time%(1000*60*60)/(1000*60))//분
                        let seconds=Math.floor(time%(1000*60)/1000)//초


                        document.querySelector('#timer').innerHTML = `  ${numberPad(date, 2)} :
                        ${numberPad(hours, 2)} : ${numberPad(minutes, 2)} : ${numberPad(seconds, 2)}
                        `;
                    }else if(type===5){
                        // cusNum으로 구별
                        let customday=new Date(arr[cusNum]);
                        // 100일 200일등 연도까지 변하지 않는경우때문에 년도 자동조정 없음

                        now=now.getTime()+32400000;
                        customday=customday.getTime();
                        let time=customday-now;
                        let date=Math.floor(time/(1000*60*60*24))//일
                        let hours=Math.floor(time%(1000*60*60*24)/(1000*60*60))//시간
                        let minutes=Math.floor(time%(1000*60*60)/(1000*60))//분
                        let seconds=Math.floor(time%(1000*60)/1000)//초


                        document.querySelector('#timer').innerHTML = `  ${numberPad(date, 2)} :
                        ${numberPad(hours, 2)} : ${numberPad(minutes, 2)} : ${numberPad(seconds, 2)}
                        `;
                        

                     }
                }
            
            setInterval(pickDate);
            function pickDate(){
               let now2 = new Date();
                if(n>0){
                    for (let index = 0; index < arr.length; index++) {
                        let  strname='custom'+index;
                        let customIndex = document.querySelector('#custom'+index)
                       
                       
                     customIndex.addEventListener('click', e => {
                        type=5;
                        cusNum=index;
                     
                        });
                    }
                        

                
                        
                }
            }

            
            function numberPad(n, width) {
                n = n + '';
                return n.length >= width ? n : new Array(width - n.length + 1).join('0') + n;
            }
            function addList() {
                if(btn5.value!==''&&Cusdate.value!==''){

                    let time= document.querySelector('#Cusdate').value
                    const addValue = document.getElementById('btn5').value;
                    var input = document.getElementById('btn5'); 
                    let li = document.createElement("li");

                    li.setAttribute("id", 'custom'+n)
                    li.setAttribute("class", 'dropdown-item')
                    li.setAttribute("type", 'button')
                    // li.setAttribute("onclick", '()')
                    const textNode = document.createTextNode(addValue);
                    li.appendChild(textNode);
                    document.getElementById('btnGroup').appendChild(li);
                    input.value=null;
                    Cusdate.value=null;
                    
                    //날짜 넣기
                    // console.log(time)
                    arr.push(time);
                    // console.log(arr[cusNum]);
                    
                    n++;


                }
             }
        

        //웹기초 포트폴리오->아마존 배포
         //html+css+js활용 ->타이머가 달린 디데이카운터 완성

         //현재시간이 실시간으로 바뀌는 타이머가 메인에 달려있어야함 (년월일요일시분초(밀리초))
         //메인 하단에 디데이 카운터 목록 배치 (여러개의 디데이리스트를 보여줌)
         //전반적인 디자인컨셉은 구글 ->dday counter ui 벤치마킹 

         //시맨틱 태그 활용 화면구성



    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

</body>
</html>